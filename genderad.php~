<?php
// genderad.php
define('LOCAL_MEMCACHE_PORT', 80 );
define('LOCAL_MEMCACHE_HOST', '127.0.0.1' );

$adid_cpc = array("girl" => .01, "guy" => .50);   // THIS COULD CHANGE EACH DAY
$siteid = $_REQUEST['siteid'];
$deviceid = $_REQUEST['deviceid'];
$device_key = "DEVICE".$deviceid;
$site_key = "SITE".$siteid;

// open connection to memcache
$memcache = new Memcache;

if ( $memcache ) {
  if ( $memcache->addServer(LOCAL_MEMCACHE_HOST, LOCAL_MEMCACHE_PORT, TRUE) ) {
    // fetch device and site objects using device_key and site_key
  }
 }

 

$r = .50;

if ( rand(1, 100)/100.0 < $r ) {
  echo "<a href='genderclick.php?adid=girl&siteid=$siteid&deviceid=$deviceid'>Hey Girls, find hot guys!</a>";

 } else {
  echo "<a href='genderclick.php?adid=guy&siteid=$siteid&deviceid=$deviceid'>Hey Guys, find hot girls!</a>";
 }

?>
